		ORG 	0000H
		MOV	R0,#2
		MOV	R1,#4
		MOV	R2,#0
		MOV	R3,#0
		MOV	R4,#0
		MOV	R5,#0
		MOV	R6,#0
		MOV	R7,#0
		MOV	30H,#0
		MOV	31H,#0
		JMP     START
		
		
		
		ORG	8000H
START:		
		
MAIN:		MOV	21H,#5
LL:		MOV	22H,#3
LOOP2:		MOV	23H,#3
LOOP3:		CLR	P1.4
		MOV	A,R0
		CALL	SHOW_7_2
		CALL	DELAY
		SETB	P1.4
		
		CLR	P1.5
		MOV	A,R1
		CALL	SHOW_7_2
		CALL	DELAY
		SETB	P1.5
		
		CLR	P2.0
		MOV	A,R2
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.0
		
		CLR	P2.1
		MOV	A,R3
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.1
		
		CLR	P2.2
		MOV	A,R4
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.2
		
		CLR	P2.3
		MOV	A,R5
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.3
		
		CLR	P2.4
		MOV	A,R6
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.4
		
		CLR	P2.5
		MOV	A,R7
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.5
		
		CLR	P2.6
		MOV	A,30H
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.6
		
		CLR	P2.7
		MOV	A,31H
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.7
		
			
				
		DJNZ	23H,LOOP3
		DJNZ	22H,LOOP2
		DJNZ	21H,LL
		
		
		JB	P1.0,_P37
		MOV	52H,R2
		MOV	53H,R3
		MOV	60H,30H
		MOV	61H,31H
		MOV	R2,60H
		MOV	R3,61H
		MOV	30H,52H
		MOV	31H,53H
		
_P37:		JB	P3.7,_P13
		JMP	STOP
		
_P13:		JB	P1.3,_P11
		MOV	A,31H
		CJNE	A,#9,NEXT31H
		MOV	31H,#0
		MOV	A,30H
		CJNE	A,#9,NEXT30H
		MOV	30H,#0
		JMP	_P11	
NEXT30H:	INC	30H		
		JMP	_P11
NEXT31H:	INC	31H
		JMP	_P11
		
_P11:		JB	P1.1,TIME
		CJNE	R3,#9,NEXTR3
		MOV	R3,#0
		CJNE	R2,#9,NEXTR2
		MOV	R2,#0
		JMP	TIME
NEXTR2:		INC	R2
		JMP	TIME
NEXTR3:		INC	R3
		JMP	TIME

		
TIME:		CJNE	R1,#0,NEXTR1
		MOV	R1,#9
		
		CJNE	R0,#0,NEXTR0
		JMP	STOP
		
		

NEXTR0:		DEC	R0
		JMP	CLOCK
		
NEXTR1:		DEC	R1
		
		JB	P1.2,CLOCK
		MOV	R0,#2
		MOV	R1,#4
		
CLOCK:		MOV	A,R7
		CJNE	A,#9,NEXTR7
		MOV	R7,#0
		
		MOV	A,R6
		CJNE	A,#5,NEXTR6
		MOV	R6,#0
		
		MOV	A,R5
		CJNE	A,#9,NEXTR5
		MOV	R5,#0
		
		MOV	A,R4
		CJNE	A,#5,NEXTR4
		MOV	R4,#0
		JMP	MAIN

NEXTR4:		INC	R4
		JMP	MAIN
		
NEXTR5:		INC	R5
		JMP	MAIN
		
NEXTR6:		INC	R6
		JMP	MAIN

NEXTR7:		INC	R7				
		JMP 	MAIN

SHOW_7:		ANL	A,#0FH
		MOV	DPTR,#DATA
		MOVC	A,@A+DPTR
		MOV	P3,A
		RET


STOP:		JB	P1.0,NORESTTIME
		MOV	R4,#0
		MOV	R5,#0
		MOV	R6,#0
		MOV	R7,#0
		
NORESTTIME:	SETB	P3.7
		MOV	R0,#0
		MOV	R1,#0
		CLR	P1.4
		MOV	A,R0
		CALL	SHOW_7_2
		CALL	DELAY
		SETB	P1.4
		
		CLR	P1.5
		MOV	A,R1
		CALL	SHOW_7_2
		CALL	DELAY
		SETB	P1.5
		
		CLR	P2.0
		MOV	A,R2
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.0
		
		CLR	P2.1
		MOV	A,R3
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.1
		
		CLR	P2.2
		MOV	A,R4
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.2
		
		CLR	P2.3
		MOV	A,R5
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.3
		
		CLR	P2.4
		MOV	A,R6
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.4
		
		CLR	P2.5
		MOV	A,R7
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.5
		
		CLR	P2.6
		MOV	A,30H
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.6
		
		CLR	P2.7
		MOV	A,31H
		CALL	SHOW_7
		CALL	DELAY
		SETB	P2.7
		
		
		JB	P1.3,STOP
		MOV	R0,#2
		MOV	R1,#4
		JMP	MAIN



		
SHOW_7_2:	ANL	A,#0FH
		MOV	DPTR,#DATA2
		MOVC	A,@A+DPTR
		MOV	P0,A
		RET
		
DATA2:		DB	88H,0EEH,92H,0A2H
		DB	0E4H,0A1H,81H,0EAH
		DB	80H,0A0H,88H,85H	;A IS 0C0H
		DB	99H,86H,91H,0D1H
		

DATA:		DB	0C0H,0F9H,0A4H,0B0H
		DB	99H,92H,82H,0F8H
		DB	80H,90H
		
		
DELAY:		MOV	TMOD,#02H
		MOV	TH1,#95H
		MOV	TL1,#95H
		SETB	TR1
		CLR	TF1
		JNB	TF1,$
		CLR	TR1
		RET
	